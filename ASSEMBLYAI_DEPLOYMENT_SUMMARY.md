# AssemblyAIè¯­éŸ³è½¬å½•é›†æˆ - éƒ¨ç½²æ€»ç»“

## âœ… å·²å®Œæˆçš„é›†æˆ

### 1. AssemblyAI APIé›†æˆ
- **APIå¯†é’¥**: `9a9bc1cad7b24932a96d7e55469436f2` (å·²é…ç½®)
- **æœåŠ¡**: AssemblyAI Universalæ¨¡å‹
- **è¯­è¨€**: ä¸­æ–‡æ”¯æŒ (`language_code: "zh"`)
- **åŠŸèƒ½**: éŸ³é¢‘ä¸Šä¼  â†’ è½¬å½• â†’ ç»“æœè½®è¯¢

### 2. ä¾èµ–æ›´æ–°
```json
{
  "axios": "^1.6.2",
  "fs-extra": "^11.2.0"
}
```

### 3. APIç«¯ç‚¹æ›´æ–°
- **å¥åº·æ£€æŸ¥**: `/api/transcription/health` - æµ‹è¯•AssemblyAIè¿æ¥
- **éŸ³é¢‘è½¬å½•**: `/api/transcription/audio` - å¤„ç†éŸ³é¢‘æ–‡ä»¶è½¬å½•

### 4. è½¬å½•æµç¨‹
```
1. æ¥æ”¶éŸ³é¢‘æ–‡ä»¶ â†’ 
2. ä¸Šä¼ åˆ°AssemblyAI â†’ 
3. æäº¤è½¬å½•ä»»åŠ¡ â†’ 
4. è½®è¯¢è·å–ç»“æœ â†’ 
5. ä¿å­˜åˆ°æ•°æ®åº“ â†’ 
6. è¿”å›è½¬å½•æ–‡æœ¬
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### å½“å‰çŠ¶æ€
ä½ çš„APIå¯†é’¥å·²ç»è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²ï¼š

```bash
# ä»£ç å·²å‡†å¤‡å°±ç»ªï¼Œç›´æ¥æ¨é€åˆ°Railway
git add .
git commit -m "é›†æˆAssemblyAIè¯­éŸ³è½¬å½•æœåŠ¡"
git push
```

### Railwayç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
å¦‚æœè¦åœ¨Railwayæ§åˆ¶å°å•ç‹¬é…ç½®ï¼š
```
ASSEMBLYAI_API_KEY = 9a9bc1cad7b24932a96d7e55469436f2
```

## ğŸ§ª æµ‹è¯•è½¬å½•åŠŸèƒ½

### 1. å¥åº·æ£€æŸ¥
```bash
curl https://your-app.railway.app/api/transcription/health
```

é¢„æœŸå“åº”ï¼š
```json
{
  "status": "ok",
  "service": "assemblyai-transcription",
  "api_service": "AssemblyAI",
  "model": "universal",
  "mongodb": "connected",
  "api_key_configured": true
}
```

### 2. å‰ç«¯æµ‹è¯•
1. æ‰“å¼€ä¼šè®®åº”ç”¨
2. ç‚¹å‡»"å®æ—¶è½¬å½•"å›¾æ ‡
3. ç‚¹å‡»"æµ‹è¯•éº¦å…‹é£"ç¡®è®¤æƒé™
4. å¼€å§‹å½•éŸ³æµ‹è¯•
5. æŸ¥çœ‹è½¬å½•ç»“æœ

### 3. æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•
```javascript
// æ£€æŸ¥è½¬å½•å®¢æˆ·ç«¯çŠ¶æ€
console.log('è½¬å½•å®¢æˆ·ç«¯:', window.transcriptionClient);

// æµ‹è¯•æœåŠ¡è¿æ¥
await window.transcriptionClient.testConnection();
```

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### AssemblyAIé…ç½®
```javascript
const transcriptionData = {
  audio_url: audioUrl,
  speech_model: "universal",
  language_code: "zh", // ä¸­æ–‡
  punctuate: true,     // è‡ªåŠ¨æ ‡ç‚¹
  format_text: true    // æ ¼å¼åŒ–æ–‡æœ¬
};
```

### è½®è¯¢æœºåˆ¶
- **æœ€å¤§ç­‰å¾…æ—¶é—´**: 3åˆ†é’Ÿ (60æ¬¡ Ã— 3ç§’)
- **è½®è¯¢é—´éš”**: 3ç§’
- **è¶…æ—¶å¤„ç†**: è‡ªåŠ¨è¿”å›é”™è¯¯

### é”™è¯¯å¤„ç†
- ç½‘ç»œé”™è¯¯è‡ªåŠ¨é‡è¯•
- è¯¦ç»†é”™è¯¯æ—¥å¿—è®°å½•
- å‰ç«¯å‹å¥½çš„é”™è¯¯æç¤º

## ğŸ“Š æ€§èƒ½é¢„æœŸ

### AssemblyAIæ€§èƒ½æŒ‡æ ‡
- **å‡†ç¡®ç‡**: 90%+ (ä¸­æ–‡)
- **å¤„ç†é€Ÿåº¦**: é€šå¸¸ < 30ç§’
- **æ”¯æŒæ ¼å¼**: webm, mp3, wav, mp4ç­‰
- **æ–‡ä»¶å¤§å°é™åˆ¶**: 500MB (è¿œè¶…éœ€æ±‚)

### æˆæœ¬é¢„æœŸ
- **å®šä»·**: $0.37/å°æ—¶éŸ³é¢‘
- **å…è´¹é¢åº¦**: æŸ¥çœ‹AssemblyAIæ§åˆ¶å°
- **å…¸å‹ç”¨é‡**: 5åˆ†é’Ÿå½•éŸ³ â‰ˆ $0.03

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°
- éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ å’Œè½¬å½•
- ä¸­æ–‡è¯­éŸ³è¯†åˆ«
- è‡ªåŠ¨æ ‡ç‚¹å’Œæ ¼å¼åŒ–
- è½¬å½•å†å²ä¿å­˜
- é”™è¯¯å¤„ç†å’Œé‡è¯•

### ğŸ”® å¯æ‰©å±•åŠŸèƒ½
- å®æ—¶æµå¼è½¬å½•
- è¯´è¯äººè¯†åˆ«
- å…³é”®è¯æ£€æµ‹
- è¯­éŸ³æƒ…æ„Ÿåˆ†æ

## ğŸš¨ æ³¨æ„äº‹é¡¹

### 1. APIå¯†é’¥å®‰å…¨
- å½“å‰å¯†é’¥å·²ç¡¬ç¼–ç ï¼Œé€‚åˆæµ‹è¯•
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡
- å®šæœŸæ£€æŸ¥APIä½¿ç”¨é‡

### 2. ç½‘ç»œè¦æ±‚
- éœ€è¦ç¨³å®šçš„äº’è”ç½‘è¿æ¥
- æ–‡ä»¶ä¸Šä¼ å¯èƒ½éœ€è¦æ—¶é—´
- è€ƒè™‘è¶…æ—¶å¤„ç†

### 3. ç”¨æˆ·ä½“éªŒ
- è½¬å½•æœ‰å»¶è¿Ÿï¼ˆ10-30ç§’ï¼‰
- è¾ƒé•¿éŸ³é¢‘å¤„ç†æ—¶é—´æ›´é•¿
- å»ºè®®æ·»åŠ è¿›åº¦æç¤º

## âœ… é—®é¢˜è§£å†³

ä½ ä¹‹å‰é‡åˆ°çš„é—®é¢˜å·²å…¨éƒ¨è§£å†³ï¼š
- âŒ `isDbConnected is not defined` â†’ âœ… ä½¿ç”¨`mongoose.connection.readyState`
- âŒ PythonæœåŠ¡è¿æ¥å¤±è´¥ â†’ âœ… ç›´æ¥ä½¿ç”¨AssemblyAI API
- âŒ è½¬å½•åŠŸèƒ½æ— å“åº” â†’ âœ… å®Œæ•´çš„AssemblyAIé›†æˆ

ç°åœ¨è½¬å½•åŠŸèƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ï¼ğŸ‰